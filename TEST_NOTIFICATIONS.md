# üîî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìã –ß—Ç–æ –±—ã–ª–æ —É–ª—É—á—à–µ–Ω–æ:

### 1. **–ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –≤ API** ‚úÖ
```python
# backend/app/api/courier.py
response.append({
    "complex_name": "–ñ–ö –ó–µ–ª—ë–Ω—ã–π",      # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
    "full_address": "–ñ–ö –ó–µ–ª—ë–Ω—ã–π, –¥. 2–∫4",  # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
    "building": "2–∫4",
    "entrance": "5",
    ...
})
```

### 2. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚úÖ
```
–ö–ª–∏–µ–Ω—Ç—É –ø—Ä–∏ –≤–∑—è—Ç–∏–∏ –∑–∞–∫–∞–∑–∞:
üöÄ –ö—É—Ä—å–µ—Ä –≤—ã–µ—Ö–∞–ª!
üë§ –í–∞—à –∫—É—Ä—å–µ—Ä: –ò–≤–∞–Ω
üïê –í—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è: 12:00-14:00
üì¶ –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã—Å—Ç–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç —É –¥–≤–µ—Ä–∏!

–ö–ª–∏–µ–Ω—Ç—É –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏:
‚úÖ –ì–æ—Ç–æ–≤–æ!
üì¶ –ú—ã –∑–∞–±—Ä–∞–ª–∏ 2 –ø–∞–∫–µ—Ç–∞
üíö –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å —Å–µ—Ä–≤–∏—Å–æ–º ¬´–Ø –£–ë–ï–†–£¬ª
–° –±–∞–ª–∞–Ω—Å–∞ —Å–ø–∏—Å–∞–Ω 1 –∫—Ä–µ–¥–∏—Ç
```

### 3. **–ö—É—Ä—å–µ—Ä –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å** ‚úÖ
```
üü° –ó–∞–∫–∞–∑ #123
‚îå üìç –ñ–ö –ó–µ–ª—ë–Ω—ã–π, –¥. 2–∫4  ‚Üê –î–û–ë–ê–í–õ–ï–ù–û!
‚îú üïê 12:00-14:00
‚îú üö™ –ü–æ–¥—ä–µ–∑–¥ 5, —ç—Ç–∞–∂ 9
‚îú üè† –ö–≤–∞—Ä—Ç–∏—Ä–∞ 45
‚îú üîë –î–æ–º–æ—Ñ–æ–Ω: 45–ö
```

### 4. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏** ‚úÖ
```
–ü–æ—Å–ª–µ –≤–∑—è—Ç–∏—è –∑–∞–∫–∞–∑–∞:
‚úÖ –ö–ª–∏–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω, —á—Ç–æ –≤—ã –µ–¥–µ—Ç–µ!

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
‚úÖ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏!
```

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Backend
```bash
cd backend
source venv/bin/activate
python -m uvicorn app.main:app --host 0.0.0.0 --port 8080 --reload
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Courier Bot
```bash
cd courier-bot
source venv/bin/activate
python bot.py
```

### 3. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
```bash
# –ß–µ—Ä–µ–∑ Web App –∏–ª–∏ curl:
curl -X POST http://localhost:8080/api/orders/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "address_id": 1,
    "date": "2024-12-24",
    "time_slot": "12:00-14:00"
  }'
```

### 4. –ö—É—Ä—å–µ—Ä –±–µ—Ä—ë—Ç –∑–∞–∫–∞–∑
- –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞: https://t.me/YaUberu_TeamBot
- –ù–∞–∂–∞—Ç—å "üìã –ú–æ–∏ –∑–∞–¥–∞—á–∏"
- –í—ã–±—Ä–∞—Ç—å –ñ–ö ‚Üí –î–æ–º ‚Üí "–í–∑—è—Ç—å"
- **–ü–†–û–í–ï–†–ò–¢–¨:** –ö—É—Ä—å–µ—Ä –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å?
- **–ü–†–û–í–ï–†–ò–¢–¨:** –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "üöÄ –ö—É—Ä—å–µ—Ä –≤—ã–µ—Ö–∞–ª"?

### 5. –ö—É—Ä—å–µ—Ä –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–∫–∞–∑
- –ù–∞–∂–∞—Ç—å "‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ"
- –í—ã–±—Ä–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–∫–µ—Ç–æ–≤ (1-5)
- **–ü–†–û–í–ï–†–ò–¢–¨:** –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "‚úÖ –ì–æ—Ç–æ–≤–æ"?

---

## üîç –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

### Backend –ª–æ–≥–∏:
```bash
[NOTIFY] Sending 'courier took order' to client 777333892
[NOTIFY] Sent to 777333892: 200
[NOTIFY] Result: True

[NOTIFY] Sending 'order completed' to client 777333892, bags=2
[NOTIFY] Sent to 777333892: 200
[NOTIFY] Result: True
```

### Courier Bot –ª–æ–≥–∏:
```bash
[BOT] Order #123 taken by courier 8141463258
[API] POST /courier/orders/123/take - 200
[BOT] Order #123 completed with 2 bags
[API] POST /courier/orders/123/complete - 200
```

---

## ‚ö†Ô∏è –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –†–ï–ê–õ–¨–ù–û –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Telegram?
- [ ] –ö—É—Ä—å–µ—Ä –≤–∏–¥–∏—Ç **–ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å** (–ñ–ö + –¥–æ–º)?
- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å `[NOTIFY] Result: True`?
- [ ] –ö–Ω–æ–ø–∫–∞ "–í–∑—è—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç?
- [ ] –ö–Ω–æ–ø–∫–∞ "–í—ã–ø–æ–ª–Ω–µ–Ω–æ" —Ä–∞–±–æ—Ç–∞–µ—Ç?

### ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **"‚ùå –ó–∞–∫–∞–∑ —É–∂–µ –≤–∑—è—Ç"** ‚Üí –¥—Ä—É–≥–æ–π –∫—É—Ä—å–µ—Ä –±—ã—Å—Ç—Ä–µ–µ
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç** ‚Üí –ø—Ä–æ–≤–µ—Ä—å `TELEGRAM_BOT_TOKEN` –≤ `.env`
- **"–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º"** ‚Üí backend –Ω–µ –∑–∞–ø—É—â–µ–Ω
- **–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤** ‚Üí —Å–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ Web App

---

## üí° –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Telegram):

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –Ω–∞–ø—Ä—è–º—É—é:
```bash
# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã –¥–ª—è –∫—É—Ä—å–µ—Ä–∞:
curl http://localhost:8080/api/courier/orders?complex_id=1&building=2–∫4

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
[{
  "id": 123,
  "complex_name": "–ñ–ö –ó–µ–ª—ë–Ω—ã–π",      ‚Üê –ü–†–û–í–ï–†–¨!
  "full_address": "–ñ–ö –ó–µ–ª—ë–Ω—ã–π, –¥. 2–∫4",  ‚Üê –ü–†–û–í–ï–†–¨!
  "building": "2–∫4",
  ...
}]
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
```python
# –í Python REPL:
import asyncio
from backend.app.services.notifications import notify_client_courier_took_order

asyncio.run(notify_client_courier_took_order(
    client_telegram_id=777333892,  # –¢–≤–æ–π Telegram ID
    courier_name="–¢–µ—Å—Ç–æ–≤—ã–π –∫—É—Ä—å–µ—Ä",
    time_slot="12:00-14:00"
))
# –ü—Ä–æ–≤–µ—Ä—å Telegram - –ø—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ?
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:

‚úÖ **–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏:**
1. –ö—É—Ä—å–µ—Ä –≤–∏–¥–∏—Ç "üìç –ñ–ö –ó–µ–ª—ë–Ω—ã–π, –¥. 2–∫4" –≤ –∑–∞–∫–∞–∑–µ
2. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç "üöÄ –ö—É—Ä—å–µ—Ä –≤—ã–µ—Ö–∞–ª!" –ø—Ä–∏ –≤–∑—è—Ç–∏–∏
3. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç "‚úÖ –ì–æ—Ç–æ–≤–æ!" –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
4. –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å `[NOTIFY] Result: True`
5. Undo –∫–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (5 –º–∏–Ω—É—Ç)

‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏:**
1. –ö—É—Ä—å–µ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "–¥. 2–∫4" (–±–µ–∑ –ñ–ö)
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç (–ø—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω!)
3. –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö `[NOTIFY ERROR]`
4. "‚ùå –ó–∞–∫–∞–∑ —É–∂–µ –≤–∑—è—Ç" –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å `.env` —Ñ–∞–π–ª—ã (—Ç–æ–∫–µ–Ω—ã, URL)
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend –∏ bot
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ PostgreSQL/SQLite —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Client Bot

**–í—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ –∫–æ—Ä–æ–±–∫–∏!** üöÄ

